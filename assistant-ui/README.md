# Personal AI Assistant UI

一个现代化、极致紧凑的AI助手前端界面，基于 React + TypeScript + Tailwind CSS 构建。

## ✨ 当前支持的功能

### 1. 界面与交互

- 响应式布局，适配桌面与移动端
- 明亮/深色主题切换，动画流畅
- 多对话会话管理，分组显示历史
- 新建/切换/删除对话
- 用户状态栏（登录/已登录，弹窗登录与系统设置）
- 界面布局
  - 左侧侧边栏，可折叠
    - 顶部：历史对话列表，按时间（今天、昨天、本周、本月，更早对话按月分组）分组显示
      - 当鼠标悬停在列表项上时，显示删除按钮，可以删除该历史对话。
    - 底部：用户状态栏（头像+用户名称）
  - 右侧主界面
    - 顶部：对话标题栏。在标题栏右侧有主题切换按钮
    - 中间：对话列表
      - 用户消息和AI消息的背景色有一定的差异。
      - 对话框采用气泡风格设计
      - 对话框底部左侧显示消息发送时间（格式 HH:mm）
      - 当鼠标悬停在用户消息框上时，底部右侧显示`复制`, `编辑`按钮
      - 当鼠标悬停在AI消息框上时，底部右侧显示`复制`， `重新生成`， `喜欢`，和`不喜欢`按钮
      - 消息底部栏高度较小，避免占用过多空间
    - 底部：用户输入区域分外三层，显示边框将3部分包裹在一起。
      - 上部：上传文件按钮。按钮右侧为上传文件列表。采用float布局，如果一行显示不下，可以多行显示。采用较小的高度
      - 中部：用户输入区域。允许输出多行文字。高度自动调整，不要显示边框
      - 底部：工具栏。采用较小的高度
        - 左侧工具：
          - 模型选择下拉菜单
          - 模型token使用统计信息（显示一个图标，鼠标悬停时显示统计信息）
          - 消息通知按钮(没有消息的时候不显示，有警告消息的时候显示警告图标，有错误的时候显示错误图标。鼠标悬停在图标上时，显示警告或者错误信息)
          - 设置按钮，点击显示模型设置对话框
        - 右侧工具：
          - 发送按钮（用户也可以按下快捷键`ctrl`+`enter`发送消息）
          - 语音输入按钮
          - 新增对话按钮
- 界面元素通用设计规则
  - 按钮不显示标题，采用图标的方式
  - 可点击操作的界面元素，比如按钮，或者列表项，在鼠标悬停时，背景色高亮
  - 图标库可以考虑使用`Heroicons`或者`react-icons`。根据项目的需求，选择其一

### 2. 聊天与消息

- 消息气泡区分用户与AI。用户消息背景色稍深
- 支持Markdown，包括基本类型，还有表格（需显示边框）、图片、代码块、引用等。
- 代码块支持语法高亮。鼠标悬停在代码块上时，右上角显示复制按钮。
- 支持Mermaid图表渲染
  - Mermaid图仅在新的消息加入对话列表，或者加载历史对话，或者切换主题时才需要渲染。其他事件，勿重新渲染图片，否则容易导致界面出现抖动现象
  - 鼠标悬停在图像上时，右上角显示复制按钮（复制Mermaid代码）和放大按钮（弹出对话框显示大图）
- 当消息框存在代码块或者图片时，对话框宽度适当增加，避免代码块太窄或者图片太小
- 消息时间戳显示
- AI回复加载动画
- 自动滚动至最新消息
- 消息操作（编辑、复制、重新生成）

### 3. 输入与文件

- 多行输入框，自动高度
- 拖拽/粘贴/选择文件上传，文件列表展示与移除
- 允许从粘贴板粘贴截图上传
- 智能发送/取消按钮（AI回复时可终止）。用户发送消息后，在AI回复完成前，按钮变成取消按钮状态，可取消请求
- 模型选择下拉菜单
- 输入区三层结构：文件上传、输入+按钮、工具栏
- 消息发送框支持多行显示，高度自动调节。支持快捷键发送消息。消息发送后，输入框保持光标、输入框高度恢复默认高度。

### 4. 用户与系统

- 用户登录/退出，头像与昵称展示
- 用户未登录状态，点击用户状态栏弹出登录对话框
- 用于已登录状态，点击用户状态栏弹出系统设置对话框

## 🎯 设计原则

- **极致紧凑**：布局紧凑，减少冗余空间
- **现代美观**：圆角、阴影、动画，视觉统一
- **一致性**：操作逻辑与交互风格统一
- **响应性**：快速反馈，流畅动画
- **易用性**：操作直观，提示明确
- **国际化**：支持国际化设置

## 系统实现

### 🛠 技术栈

仅在必须时添加新的依赖。使用`npm`依赖管理工具。

- React 19
- TypeScript
- Tailwind CSS v4
- Vite
- Heroicons
- React-Intl

🗂 状态管理

本项目使用 React Context 管理全局状态，后续可根据需求引入更强大的状态管理库。

🔗 API 交互

通过 Axios 统一管理与后端的 API 通信，所有接口定义在 `src/api/` 目录下。

🧪 测试

使用 Jest 和 React Testing Library 进行单元测试，测试文件位于 `src/__tests__/` 目录。

### 样式设计

- **基于 Tailwind CSS v4**：遵循Tailwind CSS的设计原则，利用Tailwind的设计系统，使用v4语法
- **遵循语义化设计原则**：语义化组件类设计，按功能模块分组，使用描述性命名
  - 按模块分组：比如`.btn-*`、`.message-*`、`.sidebar-*`、`.chat-*`
  - 描述功能而非样式：比如`.btn-primary`（不是`.blue-button`）
- **合理组织文件结构**：在 `src/styles/index.css` 中按顺序组织
  - 首先重置基础样式
  - 然后是布局组件（比如`.app-container`、`.main-layout`）
  - 然后是各个功能组件部分
- **尽量使用组合式**：避免直接写原生CSS
  - 使用 `@apply` 指令组合 Tailwind 工具类
  - 示例：`.btn-primary { @apply bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg; }`
- **响应式**：利用 Tailwind 的响应式前缀（比如`sm:`、`md:`、`lg:`、`xl:`）
- **支持主题切换**：每个组件都包含 `dark:` 变体，支持明暗主题无缝切换

### 代码设计

- 结构化设计，遵循SOLID原则
- 良好的注释，提升代码易读性
- 优先使用框架提供的功能或者在其基础上扩展（比如Markdown的渲染，样式等），避免自己重复造轮子
  
### 📁 目录结构

- `src/`：主代码目录
  - src/components/：通用组件
  - src/pages/：页面组件
  - src/api/：API 请求
  - src/context/：全局状态
  - src/styles/：样式文件
- `public/`：静态资源
- `README.md`：项目说明

## 🚀 快速开始

- 编译
  
  ```bash
  cd /(project root folder)/assistant-ui && npm run build
  ```

- 启动

  ```bash
  pkill -f vite && cd /(project root folder)/assistant-ui && npm run build
  ```

访问 <http://localhost:5173> 查看应用。

## 📋 待完善功能

- [ ] 后台API交互
- [ ] 消息搜索
- [ ] 对话导出
- [ ] 更多AI模型集成
- [ ] 插件系统支持

---

> 本项目持续迭代中，欢迎反馈建议！
